# GuardTrack Development Setup

## Prerequisites

- Flutter SDK (latest stable version)
- Dart SDK (comes with Flutter)
- Android Studio / VS Code
- Git

## Initial Setup

1. **Clone the repository:**
   ```bash
   git clone https://github.com/blackswanalpha/guardtrack.git
   cd GuardTrack
   ```

2. **Navigate to Flutter project:**
   ```bash
   cd guardtrack
   ```

3. **Install dependencies:**
   ```bash
   flutter pub get
   ```

4. **Generate required files:**
   ```bash
   # Generate model files (.g.dart files)
   flutter packages pub run build_runner build
   
   # Or for watching changes during development
   flutter packages pub run build_runner watch
   ```

5. **Generate mock files for testing:**
   ```bash
   flutter packages pub run build_runner build --delete-conflicting-outputs
   ```

## Environment Configuration

### 1. Create environment files (these are ignored by git):

Create `guardtrack/lib/core/config/api_keys.dart`:
```dart
class ApiKeys {
  static const String whatsappToken = 'your_whatsapp_token_here';
  static const String whatsappPhoneNumberId = 'your_phone_number_id_here';
  static const String emailHost = 'your_email_host_here';
  static const String emailPort = 587;
  static const String emailUsername = 'your_email_username_here';
  static const String emailPassword = 'your_email_password_here';
}
```

### 2. Firebase Configuration (if using Firebase):

- Add `google-services.json` to `android/app/` directory
- Add `GoogleService-Info.plist` to `ios/Runner/` directory
- These files are ignored by git for security

### 3. Android Configuration:

Create `guardtrack/android/local.properties`:
```properties
sdk.dir=/path/to/your/android/sdk
flutter.sdk=/path/to/your/flutter/sdk
```

## Generated Files

The following files are automatically generated and should not be edited manually:

- `**/*.g.dart` - Generated by build_runner for JSON serialization
- `**/*.mocks.dart` - Generated mock files for testing
- `**/*.config.dart` - Generated configuration files

## Sensitive Files (Not in Repository)

These files contain sensitive information and are excluded from version control:

- `test_email_simple.dart` - Email testing script
- `test_whatsapp_api.dart` - WhatsApp API testing script
- `update_whatsapp_config.dart` - WhatsApp configuration update script
- `api_keys.dart` - API keys and credentials
- `google-services.json` - Firebase Android configuration
- `GoogleService-Info.plist` - Firebase iOS configuration

## Development Commands

```bash
# Run the app
flutter run

# Run tests
flutter test

# Generate code
flutter packages pub run build_runner build

# Clean and regenerate
flutter clean
flutter pub get
flutter packages pub run build_runner build --delete-conflicting-outputs

# Build for release
flutter build apk --release
flutter build ios --release
```

## Git Workflow

1. **Before committing:** Ensure no sensitive files are staged
2. **Generated files:** Will be automatically ignored
3. **Environment files:** Create your own local versions
4. **API keys:** Never commit real API keys

## Troubleshooting

### Missing .g.dart files
Run: `flutter packages pub run build_runner build`

### Build errors after git pull
Run:
```bash
flutter clean
flutter pub get
flutter packages pub run build_runner build --delete-conflicting-outputs
```

### Missing API configuration
Create the required configuration files as described in the Environment Configuration section.
